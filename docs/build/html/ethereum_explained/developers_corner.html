

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Developers Corner &mdash; The Crypto-Conundrum v1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="General Strategy" href="../investment-strategies/rules.html" />
    <link rel="prev" title="EIP-1559" href="eip_1559.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Crypto-Conundrum
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction/intro.html">Start Here!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/intro.html#who-am-i">Who am I</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/popular_questions.html">Most Popular Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/blockchain.html">The Blockchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/exchanges.html">Exchanges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/origins.html">Coin Origins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/important_terms.html">Important Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/bitcoin_vs_ethereum.html">Bitcoin Vs. Ethereum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/picking_coins.html">Picking the Right Coins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/coin_suggestions.html">Coin Suggestions</a></li>
</ul>
<p class="caption"><span class="caption-text">Ethereum, Explained:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="what_is_it.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="what_is_it.html#what-is-ethereum">What is Ethereum</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_it_works.html">How Ethereum Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="usability.html">How do I use it</a></li>
<li class="toctree-l1"><a class="reference internal" href="gas.html">Transaction Fees</a></li>
<li class="toctree-l1"><a class="reference internal" href="tokens.html">Tokens</a></li>
<li class="toctree-l1"><a class="reference internal" href="eth2.html">Ethereum 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="eip_1559.html">EIP-1559</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developers Corner</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cryptography">Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="#smart-contract-code">Smart Contract Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logs">Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accounts">Accounts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#blockchain-as-a-state-machine">Blockchain as a State Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ethereum-virtual-machine">Ethereum Virtual Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bytecode-sourcecode-and-abi">Bytecode, Sourcecode, and ABI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transaction-lifecycle">Transaction lifecycle</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Investment Rules:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../investment-strategies/rules.html">General Strategy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../investment-strategies/exit_strategies.html">Define your exit strategy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../investment-strategies/due-dilligence.html">Doing your Due-Dilligence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../investment-strategies/security.html">Securing your investment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../investment-strategies/confidence.html">Be Confident</a></li>
<li class="toctree-l1"><a class="reference internal" href="../investment-strategies/staking.html">Mining and Staking</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Crypto-Conundrum</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Developers Corner</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="developers-corner">
<h1>Developers Corner<a class="headerlink" href="#developers-corner" title="Permalink to this headline">¶</a></h1>
<p>If you’re here you have a familiarity with code, data structured, computing theory, etc. I’ll break down the intricate technical details of how this all works.</p>
<div class="section" id="cryptography">
<h2>Cryptography<a class="headerlink" href="#cryptography" title="Permalink to this headline">¶</a></h2>
<p>Like all cryptocurrencies, Ethereum relies on <a class="reference external" href="https://en.wikipedia.org/wiki/Public-key_cryptography">Public-Key-Cryptography</a>, and <a class="reference external" href="https://en.wikipedia.org/wiki/Digital_signature">Digital Signatures</a>.</p>
<p>Ethereum relies on <a class="reference external" href="https://en.wikipedia.org/wiki/Elliptic-curve_cryptography">Elliptic-Curve Cryptography</a>, specifically the <a class="reference external" href="https://en.bitcoin.it/wiki/Secp256k1">Secp256k1 Curve Library</a>. It shares this characteristic with Bitcoin, allowing many of the same library functions to be used.</p>
<p>You start by generating a private-key pair using your favorite encryption library, keeping your private key secret. Your address is the <a class="reference external" href="https://en.wikipedia.org/wiki/SHA-3">Keccak-256 (SHA-3) Hash</a> of your public key.</p>
<p>An Ethereum private key can be generated using the <a class="reference external" href="https://silentcicero.gitbooks.io/pro-tips-for-ethereum-wallet-management/content/ethereum-wallet-basics/using-seed-phrases-to-create-ethereum-accounts.html">BIP39 Standard Mnemonic Library</a>.</p>
<p>All transactions requre the use of the <a class="reference external" href="https://en.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm">Elliptic Curve Digital Signature Algorithm (ECDSA)</a> from the private key associated with the address.</p>
<p>When using your private key to sign a message, you must also include a special value: a <a class="reference external" href="https://medium.com/swlh/ethereum-series-understanding-nonce-3858194b39bf">nonce</a>. This is a scalar value equal to the number of transactions sent from this address or, in the case of accounts with associated code, the number of contract-creations made by this account. Every time you send a transaction this value increases, and is necesarry to ensure signatures are unique for each transaction to prevent double-spending.</p>
</div>
<div class="section" id="smart-contract-code">
<h2>Smart Contract Code<a class="headerlink" href="#smart-contract-code" title="Permalink to this headline">¶</a></h2>
<p>In Ethereum, a smart contract is writen in a custom programming language, known as <strong>Solidity</strong> (although there are others such as <strong>Vyper</strong>). By spending ethereum as a transaction fee, you can cause the contract to execute in a pre-determined way. <a class="reference external" href="https://hackernoon.com/turing-completeness-and-the-ethereum-blockchain-c5a93b865c1a#:~:text=Solidity%2C%20the%20Turing%20complete%20language,deployed%20once%20on%20the%20blockchain.&amp;text=A%20hacker%20can%20run%20any,to%20create%20an%20unauthorized%20effect.">Solidity is turing-complete</a>, statically typed, supports inheritance, libraries, and complex user-defined types among other features.</p>
<p>Take the following code snippet of an example smart contract:</p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="cm">/*version number*/</span><span class="w"></span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.0</span><span class="p">;</span><span class="w"></span>

<span class="cm">/*contract name*/</span><span class="w"></span>
<span class="k">contract</span><span class="w"> </span><span class="ni">example_contract</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="cm">/*function name with parameters and return values*/</span><span class="w"></span>
<span class="w">        </span><span class="kt">function</span><span class="w"> </span><span class="nv">add</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">a</span><span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">b</span><span class="p">)</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>a<span class="w"> </span><span class="o">+</span><span class="w"> </span>b<span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>This is a smart-contract written in <em>Solidity</em>. It’s name is <em>example_contract</em> It contains a single function, called <em>add</em>. This is a function that takes an input of two-numbers and adds them together, returning their sum. When you deploy this contract, it is given its own address, much like your wallet. If you wanted execute this contract, you would initiate a transaction with the contract’s address, and execution information. This information includes the name of the function you are calling, the input values, cryptographic signatures, etc.</p>
<p>Because the contract has a valid address, when deployed it can also do things such as hold balances like a normal wallet. This allows you to do things such as send Ether and various tokens to it to hold, and distribute. However, nobody owns the private key to this address. If you wanted to withdraw from the contract, you would have to write in various functions to allow you to do so. Take this example code.</p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.0</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">example_contract2</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">balance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="kt">function</span><span class="w"> </span><span class="nv">send_ether</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">payable</span><span class="w"> </span>recipient<span class="p">)</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span>balance<span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">msg.value</span><span class="p">;</span><span class="w"> </span><span class="cm">/*msg.value is the transaction value*/</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>This code contains a method that allows you to store and send ether from one person to another. If you see the word <em>payable</em> means that if you call this method, you can send ether alongside the input value of a recipient, and the contract will do with it what you specify. If you don’t specify to send it somewhere, then it will hold the amount in its account balance for the contract. This is useful because it allows you to specify what to do if someone sends ether to the contract address, alongside relevant nput data. For applications like DeFi, or that involve sending money around, it is a very powerful tool for trustless funds exchanges.</p>
<p>Imagine what you could do when you take this concept and make it more complex.</p>
<p><strong>Contracts are immutable.</strong> <em>This means that once a contract is deployed, it CANNOT BE MODIFIED. Certain variables can have values be changed, but code logic cannot. If you deployed and then realized that the contract had a bug, your only choice is to deploy a new contract that fixes this.</em></p>
<p><strong>These next 3 sections are going to be more tech-heavy so if you don’t have a CS or tech background, feel free to skip to the next article, as you don’t need to understand it to be able to use Ethereum. Otherwise, i’m still going to try and keep it simple.</strong></p>
</div>
<div class="section" id="logs">
<h2>Logs<a class="headerlink" href="#logs" title="Permalink to this headline">¶</a></h2>
<p>You also have the option to publish the metadata about a transaction, that you define. These logs are known as <em>events</em>. Take the following code.</p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.0</span><span class="p">;</span><span class="w"></span>

<span class="c1">//Declare an Event</span>
<span class="kt">event</span><span class="w"> </span><span class="nv">transfer</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>_from<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>_to<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">_value</span><span class="p">);</span><span class="w"></span>


<span class="k">contract</span><span class="w"> </span><span class="ni">example_contract2</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kt">function</span><span class="w"> </span><span class="nv">send_ether</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">payable</span><span class="w"> </span>recipient<span class="p">)</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span>emit<span class="w"> </span>transfer<span class="p">(</span><span class="k">msg.sender</span><span class="p">,</span><span class="w"> </span>recipient<span class="p">,</span><span class="w"> </span><span class="k">msg.value</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>We first declare an event and its parameters. In this case it’s <em>transfer</em> and it requires a sender, a recipient, and a value. When the function <em>send</em> is executed, it will publish this metadata to the chain alongside the rest of the transaction, as JSON data. This is done with the keyword <em>emit</em>. We can view this on a <a class="reference external" href="https://etherscan.io/tx/0x265d64a8d0e7f86cae84d29bc9b86dc796b0eaae9e84a99d0b1e82b17609b622#eventlog">block explorer</a> beautified to look like this</p>
<img alt="../_images/events.png" src="../_images/events.png" />
<p>We can see the value of all the inputs. This is a high-level topic but because we used the keyword <em>indexed</em> on the two addresses, the EVM has classified them as topics. This is so that the EVM can more easily classify and reference them later. If we were to not use the <em>indexed</em> keyword, they would be below in the <em>data</em> category, alongside <em>value</em></p>
<p>The address listed is address of the contract that emitted the log. This is necesarry because a contract may invoke a function on another contract, known as an <em>internal transaction</em>. This is still considered part of the main initial transaction for block purposes and is useful to keep track of transaction history.</p>
<p>More detailed information can be found <a class="reference external" href="https://medium.com/mycrypto/understanding-event-logs-on-the-ethereum-blockchain-f4ae7ba50378">here</a>./</p>
</div>
<div class="section" id="accounts">
<h2>Accounts<a class="headerlink" href="#accounts" title="Permalink to this headline">¶</a></h2>
<p>Unlike Bitcoin, Ethereum supports the idea of an account, with a balance.</p>
<p><strong>“Wait, if Bitcoin doesn’t actually have a balance, how come I can go to a website and it tell me how much Bitcoin I have?”</strong></p>
<p>This is a good question. The answer is that Bitcoin doesn’t actually have the concept of an account balance. When you go to a website, that site specifically has indexed the blockchain on their own and created a local copy that they then serve to you. It looks through your transaction history and calculates how much Bitcoin you have, instead of looking at the chain directly for every query. This would be very slow. Your balance is the sum of all of your previously income transaction values. Each transaction has a BTC value. Imagine you wanted to send 5 BTC. Your wallet takes several transactions from your history, and bundles them together until the sum of their values is <cite>&gt;=5 BTC</cite>. It then takes that amount, and sends it, and returns the extra unsused Bitcoin to you.</p>
<p>Look at this example transaction</p>
<img alt="../_images/btc_tx.png" src="../_images/btc_tx.png" />
<p>You can see that the input is multiple transactions until the amount is high enough to send it out to other places. This also means that amount you pay in transaction depends on how many inputs and outputs you need. If you look below you’ll see that transaction fee is measured in sat/Byte. The Bytes is the number of transactions together, and the sat is the amount of BTC you are willing to pay for each of those bytes (sat = satoshi = 1e-18 BTC).</p>
<p>Obviously this is a bad way of doing things because if you transact in smaller amounts, when you want to make a larger transaction those fees can add up. It’s also just incredibly redundant, and prohibits layer-2 scaling solutions such as rollups and sidechains. This is why the only substantial Bitcoin proposed-scaling-solution is the Lightning Network, a side-channel implementation with its own set of problems.</p>
<p>On Ethereum, in order for contracts to be able to support the ability to transfer values, it must re-imagine this. I.E you must be able to query the amount of Ether in any address in existence and have a native balance value for each address in existence. This means that when you make a transaction, it is much simpler for the network to send coins around, and simplifies many API’s and operations.</p>
<p>How is this done? Through a State Machine, which you may remember from sophomore year CS Class.</p>
</div>
<div class="section" id="blockchain-as-a-state-machine">
<h2>Blockchain as a State Machine<a class="headerlink" href="#blockchain-as-a-state-machine" title="Permalink to this headline">¶</a></h2>
<p>State Machines, if you’ve ever read this book, you’re probably breaking out into a cold-sweat right now</p>
<a class="reference internal image-reference" href="../_images/sipser.png"><img alt="../_images/sipser.png" src="../_images/sipser.png" style="width: 180pt;" /></a>
<p>Don’t worry, I’m going to keep it simple. The entire Ethereum network, at any given moment, can be represented as a state. Every time a transaction occurs, the state changes. Therefore we can represent the network as a state machine. The following examples are in the <a class="reference external" href="https://ethereum.org/en/whitepaper/">Ethereum Whitepaper</a>.</p>
<p>Think of it like this</p>
<p><code class="docutils literal notranslate"><span class="pre">APPLY(S,TX)</span> <span class="pre">-&gt;</span> <span class="pre">S'</span> <span class="pre">or</span> <span class="pre">ERROR</span></code> where S = The current State and TX = The transaction value.</p>
<p>In a real-world sense, iamgine the following: <code class="docutils literal notranslate"><span class="pre">APPLY({</span> <span class="pre">Alice:</span> <span class="pre">$50,</span> <span class="pre">Bob:</span> <span class="pre">$50</span> <span class="pre">},&quot;send</span> <span class="pre">$20</span> <span class="pre">from</span> <span class="pre">Alice</span> <span class="pre">to</span> <span class="pre">Bob&quot;)</span> <span class="pre">=</span> <span class="pre">{</span> <span class="pre">Alice:</span> <span class="pre">$30,</span> <span class="pre">Bob:</span> <span class="pre">$70</span> <span class="pre">}</span></code>. It took the current state of all balances, processed a transaction, and returned the new state.</p>
<p>In actuality, how the current state is determined is mathematically very tedious and involves <a class="reference external" href="https://eth.wiki/en/fundamentals/patricia-tree">Merkle-Patricia Trees</a>. Since this is not a CS Lecture, (and I barely understand it myself) i’m not going to walk through how those work, but I can try if there seems to be demand for it.</p>
<p>This is important because we then can understand how smart contracts fit into this model. The use of a state machine allow the network to store the current state or values of a contract at any given time. Given as these contracts can have lots of variables to track, this is essential. It also allows us to to many layer-2 scaling operations off-chain. This I will explain later in the Layer 2 Page (update later with link).</p>
</div>
<div class="section" id="ethereum-virtual-machine">
<h2>Ethereum Virtual Machine<a class="headerlink" href="#ethereum-virtual-machine" title="Permalink to this headline">¶</a></h2>
<p>To calculate the state, we first need to implement a valid transaction. We can do this through <a class="reference external" href="https://ethereum.org/en/developers/docs/evm/">The Ethereum Virtual Machine</a>. Think of it like Java. When you write a program to do something, the Java code compiles down to bytecode, which is run through the Java virtual machine. This virtual machine runs on top of your normal Kernel, to make it OS-Agnostic and converts it further to machine code executable by your kernel. The Ethereum Virtual Machine works the same way.</p>
<p>Every time you execute a transaction, the inputs and steps are converted into EVM-Bytecode. The machine takes the current state and performs the transaction and generates a new network-state. When you initially create a new contract, the contract gets converted to bytecode, and stored on the chain with its address. When you make a transaction the proper bytecode is queried and excuted. This also explains why contracts are immutable.</p>
<p>The contract address is based on the creator’s address and nonce at the moment of compilation, then hashed. Imagine the following function that gets called everytime a contract is created:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mk_contract_address</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">nonce</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">sha3</span><span class="p">(</span><span class="n">rlp</span><span class="o">.</span><span class="n">encode</span><span class="p">([</span><span class="n">normalize_address</span><span class="p">(</span><span class="n">sender</span><span class="p">),</span> <span class="n">nonce</span><span class="p">]))[</span><span class="mi">12</span><span class="p">:]</span>
</pre></div>
</div>
<p>You cannot modify a contract, once deploy, because that would require recompiling the contract-bytecode, which is a special transaction. Given that the nonce for an address is incremented with every transaction, you would not be able to recompile the contract-bytecode and deploy it to the same address because the transaction would have a different nonce, and therefore a different address.</p>
<p>The following information is provided by <a class="reference external" href="https://ethereum.org/en/developers/docs/evm/">Ethereum Website</a>:</p>
<blockquote>
<div><p>“The EVM executes as a stack machine with a depth of 1024 items. Each item is a 256-bit word, which was chosen for the ease of use with 256-bit cryptography (such as Keccak-256 hashes or secp256k1 signatures).”</p>
<p>“During execution, the EVM maintains a transient memory (as a word-addressed byte array), which does not persist between transactions.”</p>
<p>“Contracts, however, do contain a Merkle Patricia storage trie (as a word-addressable word array), associated with the account in question and part of the global state.”</p>
<p>“Compiled smart contract bytecode executes as a number of EVM opcodes, which perform standard stack operations like XOR, AND, ADD, SUB, etc. The EVM also implements a number of blockchain-specific stack operations, such as ADDRESS, BALANCE, KECCAK256, BLOCKHASH, etc.”</p>
<p>“All Ethereum clients include an EVM implementation”</p>
</div></blockquote>
<img alt="../_images/evm.png" src="../_images/evm.png" />
</div>
<div class="section" id="bytecode-sourcecode-and-abi">
<h2>Bytecode, Sourcecode, and ABI<a class="headerlink" href="#bytecode-sourcecode-and-abi" title="Permalink to this headline">¶</a></h2>
<p>EVM bytecode represented as a string of hex codes. Each byte represents one opcode (ADD, MUL, XOR, ETC.) and each opcode has a gas cost. Each <code class="docutils literal notranslate"><span class="pre">ADD</span></code> opcode is 3 gas, <code class="docutils literal notranslate"><span class="pre">MOD</span></code> is 5, <code class="docutils literal notranslate"><span class="pre">KECCAK256</span></code> is 30, and so on. This is how gas cost is calculated, and why efficiency and optimization is so important.  <a class="reference external" href="https://github.com/crytic/evm-opcodes#table">Full opcode gas cost heres</a>.</p>
<p>It is important to remember, that when a contract is published, it is only publishing the EVM-Compatible-Bytecode, not the source code to the chain. The source code can be published on an explorer such as <a class="reference external" href="https://etherscan.io">Etherscan</a> where it can then be checked against the bytecode for accuracy. If you are deploying a contract, this is important so that people know what they are interacting with and how to do so properly.</p>
<p>When you compile a contract, the compiler will generate an <em>Contract ABI (Application Binary Interface)</em> This is the standard way for you to properly create transactions by defining the functions and inputs required. If looks similar to JSON. If you publish a contract, you should also publish the ABI alongside it, on a block explorer or somewhere people can find it. Wallet applications will use this information to guide you through the process, compile, and properly encrypt and sign the transaction. Without it, people will have to decompile your bytecode and attempt to figure out how it works. This runs the risk of them sending faulty transactions. Transparency is your friend. Nobody can or will use a contract with faulty source code and no ABI.</p>
<p>An example, compressed for space. It includes all of the decompiled function information your wallet needs to create an EVM-Compatible Transaction:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="nt">&quot;constant&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;inputs&quot;</span><span class="p">:[],</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span><span class="p">,</span><span class="nt">&quot;outputs&quot;</span><span class="p">:[{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">}],</span><span class="nt">&quot;payable&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nt">&quot;stateMutability&quot;</span><span class="p">:</span><span class="s2">&quot;view&quot;</span><span class="p">,</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;function&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>More info on ABI’s can be found <a class="reference external" href="https://docs.soliditylang.org/en/v0.5.3/abi-spec.html#:~:text=The%20Contract%20Application%20Binary%20Interface,as%20described%20in%20this%20specification.">in the documentation</a></p>
</div>
<div class="section" id="transaction-lifecycle">
<h2>Transaction lifecycle<a class="headerlink" href="#transaction-lifecycle" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>What happens when you want to send a transaction. There are several steps:</dt><dd><ol class="arabic simple">
<li><dl class="simple">
<dt>Constructing the raw transaction. This is in the form of a signed raw transaction hex. Your wallet constructs the raw transaction data, and signs it with your private key. This contains several fields:</dt><dd><ol class="arabic simple">
<li><p>The Nonce, in hex. The unsigned integer that represents your transaction count, to prevent double-spends. It is incremented every time you make a transaction, to prevent replay transactions.</p></li>
<li><p>Gas Price, in hex.</p></li>
<li><p>Gas Limit, in hex.</p></li>
<li><p>the recipient, the “to” field.</p></li>
<li><p>the transaction value, in ether, also in hex.</p></li>
<li><dl class="simple">
<dt>Extra transaction data. Only necesarry for a smart contract interaction. Calculated automatically by your wallet. If you want to do it yourself though, it’s very easy:</dt><dd><ol class="arabic simple">
<li><dl class="simple">
<dt>Take the sha3 of the function signature from the contract ABI, without the parameter names.</dt><dd><ul class="simple">
<li><p>If the function signature is <code class="docutils literal notranslate"><span class="pre">mint(address</span> <span class="pre">to)</span></code>, then you should only use <code class="docutils literal notranslate"><span class="pre">mint(address)</span></code>. This is because the EVM doesn’t care about the parameters, it just needs to be able to identify the function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.utils.sha3(&quot;mint(address)&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0x7f9c8b4781db704d0917ecead0efa9e769fadacf34db8e74afcc18c0c8f35497</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Take the first <em>4</em> bytes of the hash -&gt; <code class="docutils literal notranslate"><span class="pre">0x7f9c8b47</span></code></p></li>
<li><dl class="simple">
<dt>Take the input parameters, and convert to bytes32, a 32-byte hex string. If the value of the string is less than 32-bytes, pad it on the left. If it is an address, or already in hex form, just do the padding, no extra conversion required.</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0xaB5409b0E5a66AcC9D63f668414539A60a5917C1</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">000000000000000000000000aB5409b0E5a66AcC9D63f668414539A60a5917C</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Repeat for each input parameter, and append to the function signature.</p></li>
</ol>
</dd>
</dl>
</li>
</ol>
</dd>
</dl>
</li>
<li><p>Sign the transaction with your private key.</p></li>
<li><p>Submit your transaction request by sending it to a local node. This means that the transaction construction and signing can be done offline. This is often to protect the secrecy of the security key and prevent transaction tampering. You can do this using <a class="reference external" href="https://etherscan.io/pushTx">Etherscan’s nodes</a> by submitting the raw transaction data.</p></li>
<li><p>The node will propagate the unconfirmed transaction to its peers, if they choose they will add it to their mempool. Some may reject it if they feel the gas is too low or if the transaction is invalid. This is because the mempool has a finite size.</p></li>
<li><p>The transaction sits in the mempool until a miner chooses to include it in a block. They include it in the block and execute the transactions and mine it until completion.</p></li>
<li><p>Nodes propagate the new block and state information through its peers. If the block is accepted, they will add it to their chain. If not, they ignore it.</p></li>
<li><p>Propagation continues until the entire network has the updated blocks.</p></li>
<li><p>Process repeats indefinitely.</p></li>
</ol>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../investment-strategies/rules.html" class="btn btn-neutral float-right" title="General Strategy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="eip_1559.html" class="btn btn-neutral float-left" title="EIP-1559" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Josh Weintraub.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-196042419-1', 'auto');
    
    ga('set', 'anonymizeIp', true);
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>